<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Submission - Student Portal</title>
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div class="review-container">
        <!-- Header Bar -->
        <div class="review-header-bar">
            <div class="review-header-left">
                <button class="btn-back-link" onclick="window.location.href='studentSubmissionList.html'">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                    Back to Submissions
                </button>
                <h2 class="review-exam-title" id="reviewExamTitle">Mathematics Final Examination</h2>
                <p class="review-exam-id">Submission ID: <span id="reviewSubmissionId">sub2002</span></p>
            </div>
            <div class="review-header-right">
                <div class="review-score-badge">
                    <span class="review-score-text" id="reviewScore">1/2</span>
                    <span class="review-percentage" id="reviewPercentage">50.0%</span>
                </div>
            </div>
        </div>

        <!-- Review Content -->
        <div class="review-content">
            <!-- Questions will be generated here -->
            <div id="reviewQuestionsContainer"></div>
        </div>
    </div>

    <script>
        // Mock review data
        const reviewData = {
            submissionId: 'sub2002',
            examTitle: 'Mathematics Final Examination',
            examId: 'MATH-FINAL-2025',
            score: '1/2',
            percentage: '50.0%',
            questions: [
                {
                    id: 1,
                    type: 'Multiple Choice',
                    marks: 5,
                    earnedMarks: 5,
                    questionNumber: 1,
                    question: 'What is the capital of France?',
                    options: [
                        { id: 'A', text: 'London', isCorrect: false },
                        { id: 'B', text: 'Paris', isCorrect: true },
                        { id: 'C', text: 'Berlin', isCorrect: false },
                        { id: 'D', text: 'Madrid', isCorrect: false }
                    ],
                    selectedAnswer: 'B',
                    isCorrect: true
                },
                {
                    id: 2,
                    type: 'Multiple Choice',
                    marks: 5,
                    earnedMarks: 0,
                    questionNumber: 2,
                    question: 'Which planet is known as the Red Planet?',
                    options: [
                        { id: 'A', text: 'Venus', isCorrect: false },
                        { id: 'B', text: 'Mars', isCorrect: true },
                        { id: 'C', text: 'Jupiter', isCorrect: false },
                        { id: 'D', text: 'Saturn', isCorrect: false }
                    ],
                    selectedAnswer: 'A',
                    isCorrect: false
                },
                {
                    id: 3,
                    type: 'Essay Question',
                    marks: 20,
                    earnedMarks: 15,
                    questionNumber: 3,
                    question: 'Discuss the impact of climate change on global ecosystems and propose three practical solutions that governments can implement to mitigate its effects.',
                    answer: 'Climate change has profound effects on global ecosystems. Rising temperatures disrupt habitats, leading to species migration and extinction. Three solutions include: 1) Implementing carbon pricing to incentivize emission reductions, 2) Investing in renewable energy infrastructure, and 3) Protecting and restoring natural carbon sinks like forests and wetlands.',
                    feedback: 'Good understanding of the topic. Your solutions are practical and well-explained. Consider adding more specific examples in future responses.'
                }
            ]
        };

        // Render review questions
        function renderReviewQuestions() {
            document.getElementById('reviewExamTitle').textContent = reviewData.examTitle;
            document.getElementById('reviewSubmissionId').textContent = reviewData.submissionId;
            document.getElementById('reviewScore').textContent = reviewData.score;
            document.getElementById('reviewPercentage').textContent = reviewData.percentage;

            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = reviewData.questions.map(q => {
                if (q.type === 'Multiple Choice') {
                    return `
                        <div class="review-question-card">
                            <div class="review-question-header">
                                <div class="review-question-info">
                                    <div class="review-question-type-badge mcq-badge">
                                        <span class="question-number-circle">${q.questionNumber}</span>
                                        <span>${q.type}</span>
                                    </div>
                                    <span class="review-question-marks">${q.earnedMarks}/${q.marks} marks</span>
                                </div>
                                <span class="review-result-badge ${q.isCorrect ? 'correct' : 'incorrect'}">
                                    ${q.isCorrect ? '✓ Correct' : '✗ Incorrect'}
                                </span>
                            </div>
                            <div class="review-question-content">
                                <h3 class="review-question-text">${q.question}</h3>
                                <div class="review-options-list">
                                    ${q.options.map(opt => {
                                        let optionClass = 'review-option';
                                        if (opt.id === q.selectedAnswer && opt.isCorrect) {
                                            optionClass += ' review-option-correct-selected';
                                        } else if (opt.id === q.selectedAnswer && !opt.isCorrect) {
                                            optionClass += ' review-option-wrong-selected';
                                        } else if (opt.isCorrect) {
                                            optionClass += ' review-option-correct';
                                        }
                                        
                                        return `
                                            <div class="${optionClass}">
                                                <span class="review-option-label">${opt.id}.</span>
                                                <span class="review-option-text">${opt.text}</span>
                                                ${opt.isCorrect ? '<svg class="review-option-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><polyline points="20 6 9 17 4 12"/></svg>' : ''}
                                                ${opt.id === q.selectedAnswer && !opt.isCorrect ? '<svg class="review-option-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>' : ''}
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    return `
                        <div class="review-question-card">
                            <div class="review-question-header">
                                <div class="review-question-info">
                                    <div class="review-question-type-badge essay-badge">
                                        <span class="question-number-circle">${q.questionNumber}</span>
                                        <span>${q.type}</span>
                                    </div>
                                    <span class="review-question-marks">${q.earnedMarks}/${q.marks} marks</span>
                                </div>
                            </div>
                            <div class="review-question-content">
                                <h3 class="review-question-text">${q.question}</h3>
                                
                                <div class="review-essay-section">
                                    <div class="review-section-label">Your Answer:</div>
                                    <div class="review-essay-answer">${q.answer}</div>
                                </div>

                                ${q.feedback ? `
                                    <div class="review-feedback-section">
                                        <div class="review-feedback-header">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                                            </svg>
                                            <span>Instructor Feedback</span>
                                        </div>
                                        <p class="review-feedback-text">${q.feedback}</p>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    `;
                }
            }).join('');
        }

        // Initialize
        renderReviewQuestions();
    </script>
</body>
</html>